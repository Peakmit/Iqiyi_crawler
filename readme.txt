
--------------------------------------------------------注册限制分析-----------------------------------------------------------------

爱奇艺注册方式采取的方式有两种，一个是和各大门户网站，QQ，微信进行便捷注册。一种是直接用手机进行短信验证。但是最后都需要
经过手机短信注册这个阶段，所以手机号是最重要的注册凭证。

在连续注册的过程中，对手机号没有进行限制，有可能会增加验证码进行验证。IP地址在目前已经进行了连续20次的不同号码注册中没有
见到进行限制（可能原因是一些公用IP可能会在短时间内进行大量相同的请求，这样封锁IP很容易造成误封，而且爬虫往往有大量的代理IP
，封IP并不是一个限制爬虫的好办法）。对于同一个手机号如果在短时间内请求大量的短信验证（即请求大量的注册），会被限制等待。
对于验证码是采取的滑动验证码（爱奇艺网站上说的有文字验证码但是没有遇到），验证码的图片数量有限，可以很容易就收集完。对
验证码的反爬虫措施有：（1）对验证码图片进行切块，打乱。在网站上利用javascript进行拼接。（2）不提供验证码原图，难以进行像素
对比完成自动验证码滑动。

采取的自动注册方案是：
1：爬取互联网上的虚拟手机号码，作为我们注册的手机号数据集。
2：利用selenium，主要采取xpath，对需要的元素进行提取。
3：对于滑动验证码，采取人工的手段进行滑动。
4：在注册过程中，自动爬取对应虚拟手机号的验证码。

方案说明：
现在已经完成大部分过程的自动话，可以自动根据网站进行虚拟手机号的更新，目前已经有202个各个国家的虚拟手机号。自动爬取手机
验证码，如果这个手机号已经失效，会跳过这个手机进行下一个的自动注册。目前由于还没有实现完全的自动化，还不考虑进行并行，异步
的处理。目前只有滑动验证码这一个部分没有进行自动化处理，后续可以考虑采用两个方法进行处理。1：将所有的验证码的原图找到，
在验证过程中进行匹配。然后根据像素点对比完成验证码的滑动。2：可以采用机器学习的方法，爬取数据集然后训练模型最后完成爬取。
最后还可以考虑增加将注册成功之后cookie进行保存，方便之后进行登录。


-----------------------------------------------------------数据自动采集---------------------------------------------------------------

我们采取了request的方法，结合UA池来进行防反爬虫措施。代理IP不好找，而且可能影响爬取速度，我们组没有考虑使用代理IP进行反爬
虫策略。

在进行网站解析的过程中，我们仔细观察了爱奇艺的电影的数据存储的方法，发现网站的数据是依靠滚动逐渐的把数据进行展示。然后我们
利用chrome的network进行分析，筛选除XHR数据。发现这些数据都是来自同一个网站并有统一的格式，得到的数据是json类型。可以根据
格式控制一次爬取的电影数量，爬取内容的类型（电影，纪录片，动漫），以及排序方式。我们就是通过改变里面的page_id属性进行遍历操作。

对于数据的存储我们采取可视化比较好的方法，采取将数据保存到csv文件中。但是这个方法有一个不好的地方就在于很难进行查重，修改，因此可以
考虑采用数据库进行保存，这些涉及到ORM等，可以在之后进行拓展。对于JSON的数据的提取，我们将其转换为dict类，对里面的属性进行挑选
层层剖析得到需要的属性

并行处理方面我们采取了并行与异步相结合的方法。在不同类型（电影，动漫，纪录片······）建立并行pool进行并行处理，但在里面的每一个page_id
之间采取异步的方法，建立event_loop，快速爬取每个页面的数据，并且限制了协程的数量以免速度太快了。速度上比逐个遍历上有很大的提升。


数据格式说明：
data_xxx.csv
名字 简要说明  播放时长  主要演员

phone.txt
区号+手机号
